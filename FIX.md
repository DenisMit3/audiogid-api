# üîç –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê AUDIOGID
## –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é (–û–ë–ù–û–í–õ–ï–ù–û)

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ù–ê–°–¢–†–û–ô–ö–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–±–æ—Ç—É —Å **–ª–æ–∫–∞–ª—å–Ω—ã–º PostgreSQL + PostGIS** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Cloud.ru.

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
cd /opt/audiogid
sudo ./deploy/cloudru/init-db.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç PostgreSQL 14 + PostGIS
- –°–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `audiogid`
- –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞—Ä–æ–ª–µ–º
- –ü—Ä–∏–º–µ–Ω–∏—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–û–±–Ω–æ–≤–∏—Ç–µ DATABASE_URL –≤ `/opt/audiogid/api/.env`:
```
DATABASE_URL=postgresql://audiogid:YOUR_PASSWORD@localhost:5432/audiogid
```

### 3. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

```bash
cd /opt/audiogid
python deploy/cloudru/seed-data.py
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SKU

```bash
curl -X POST http://localhost:8000/ops/init-skus
```

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï (READY)
*(–í—Å—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∫–æ–¥–∞ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤)*

1. **Database Pool**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `NullPool` –≤ `database.py` –¥–ª—è serverless.
2. **Rate Limiting**: –í–Ω–µ–¥—Ä–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Redis —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–∞—Ç–æ–º –Ω–∞ in-memory.
3. **CORS Origins**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ `ALLOWED_ORIGINS`.
4. **Proxy Query Params**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ—Ç–µ—Ä—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø—Ä–æ–∫—Å–∏-–∑–∞–ø—Ä–æ—Å–∞—Ö –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
5. **Alembic Models**: –ú–æ–¥–µ–ª–∏ —è–≤–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `env.py` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π.
6. **Flutter build_runner**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ CI/CD workflow.
7. **Drift Initialization**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `onCreate` –¥–ª—è —Å–≤–µ–∂–∏—Ö –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–π –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
8. **iOS Audio Service**: –í–∫–ª—é—á–µ–Ω—ã Background Modes (`audio`, `fetch`, `location`, `processing`).
9. **Performance**: –í–∫–ª—é—á–µ–Ω–æ GZip —Å–∂–∞—Ç–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ CDN –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
10. **QStash Robustness**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª—é—á–µ–π –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
11. **Admin CSP & Proxy**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ Content-Security-Policy –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—ç–∫–µ–Ω–¥–æ–º (suffix `/v1`).
12. **Database Migrations**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ 500 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ POI (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏: title_en, description_en, address, etc).
13. **Schema Sync**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Ä—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–∏–≥—Ä–∞—Ü–∏–π (–≤ —Ç–æ–º —á–∏—Å–ª–µ `is_deleted`).
14. **Mobile Stubs**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –≤ entitlement_repository.dart –∏ analytics_service.dart - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ API.

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–æ–¥ | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|-----|--------------|--------|
| **API** | ‚úÖ | ‚úÖ | **DEPLOYED** |
| **Admin Panel** | ‚úÖ | ‚úÖ | **DEPLOYED** |
| **Mobile Flutter** | ‚úÖ | ‚úÖ | **–ì–æ—Ç–æ–≤–æ** |
| **Database** | ‚úÖ | ‚úÖ | **PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ** |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–¥–∞: 100%**
**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã: 100%**

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 23 —Ñ–µ–≤—Ä–∞–ª—è 2026
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–µ—Ä—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –ë–î –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL.
