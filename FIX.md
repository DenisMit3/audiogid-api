# üîç –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê AUDIOGID
## –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é (–û–ë–ù–û–í–õ–ï–ù–û)

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üö® –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ù–ê–°–¢–†–û–ô–ö–ï NEON (MANUAL)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–±–æ—Ç—É **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å Neon PostgreSQL**. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –≤—Ä—É—á–Ω—É—é:

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–∞–∑—ã –î–∞–Ω—ã—Ö (Neon.tech)
1.  **–í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostGIS**: 
    - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ Neon Console.
    - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**.
    - –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `CREATE EXTENSION IF NOT EXISTS postgis;`
2.  **–ü–æ–ª—É—á–∏—Ç–µ Connection String**:
    - –í Dashboard –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **Connection Details**.
    - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **Parameters**.
    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å **Pooling** –í–ö–õ–Æ–ß–ï–ù.
    - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É `postgresql://...`.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel
1.  –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ **api** –∏ **admin** –≤ Vercel.
2.  –î–æ–±–∞–≤—å—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`, –≤—Å—Ç–∞–≤–∏–≤ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É.
3.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü–µ –Ω–∏–∂–µ.

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü—Ä–æ–µ–∫—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|----------|
| `DATABASE_URL` | api | **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –°—Å—ã–ª–∫–∞ –∏–∑ Neon (—Å Pooling) |
| `ADMIN_API_TOKEN` | api | –¢–æ–∫–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mit333-secret-token`) |
| `JWT_SECRET` | api/admin | **–û–î–ò–ù–ê–ö–û–í–´–ô** —Å–µ–∫—Ä–µ—Ç (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞) |
| `NEXT_PUBLIC_API_URL` | admin | `https://audiogid-api.vercel.app` |

### 3. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π (–Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)
–Ø —Å–æ–∑–¥–∞–ª –¥–ª—è –≤–∞—Å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç. –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
`.\sync_and_migrate.ps1`
*(–°–∫—Ä–∏–ø—Ç —Å–∞–º —Å–∫–∞—á–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ Vercel –∏ –æ–±–Ω–æ–≤–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –≤ Neon)*

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï (READY)
*(–í—Å—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∫–æ–¥–∞ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤)*

1. **Database Pool**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `NullPool` –≤ `database.py` –¥–ª—è serverless.
2. **Rate Limiting**: –í–Ω–µ–¥—Ä–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Redis —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–∞—Ç–æ–º –Ω–∞ in-memory.
3. **CORS Origins**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ `ALLOWED_ORIGINS`.
4. **Proxy Query Params**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ—Ç–µ—Ä—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø—Ä–æ–∫—Å–∏-–∑–∞–ø—Ä–æ—Å–∞—Ö –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
5. **Alembic Models**: –ú–æ–¥–µ–ª–∏ —è–≤–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `env.py` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–π.
6. **Flutter build_runner**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ CI/CD workflow.
7. **Drift Initialization**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è `onCreate` –¥–ª—è —Å–≤–µ–∂–∏—Ö –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–π –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
8. **iOS Audio Service**: –í–∫–ª—é—á–µ–Ω—ã Background Modes (`audio`, `fetch`, `location`, `processing`).
9. **Performance**: –í–∫–ª—é—á–µ–Ω–æ GZip —Å–∂–∞—Ç–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ CDN –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
10. **QStash Robustness**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–ª—é—á–µ–π –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
11. **Admin CSP & Proxy**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ Content-Security-Policy –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—ç–∫–µ–Ω–¥–æ–º (suffix `/v1`).
12. **Database Migrations**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ 500 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ POI (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏: title_en, description_en, address, etc).
13. **Schema Sync**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Ä—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–∏–≥—Ä–∞—Ü–∏–π (–≤ —Ç–æ–º —á–∏—Å–ª–µ `is_deleted`).

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–æ–¥ | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|-----|--------------|--------|
| **API** | ‚úÖ | ‚úÖ | **DEPLOYED (Fixed 500)** |
| **Admin Panel** | ‚úÖ | ‚úÖ | **DEPLOYED (Fixed 404/CSP)** |
| **Mobile Flutter** | ‚úÖ | ‚ö†Ô∏è | **–û–∂–∏–¥–∞–µ—Ç Secrets** |
| **Database** | ‚úÖ | ‚úÖ | **100% –ì–æ—Ç–æ–≤–æ** |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫–æ–¥–∞: 100%**
**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã: 85% (–Ω—É–∂–Ω—ã –∫–ª—é—á–∏)**

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 30 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–µ—Ä—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã.
